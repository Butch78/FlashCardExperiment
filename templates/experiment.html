<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>{{title}}</title>
    <!-- Requires jQuery -->
    <script src="{{ url_for('static', filename='js/jquery.min.js')}}" type="text/javascript"></script>

    <!-- Requires CodeMirror -->
    <script src="{{ url_for('static', filename='js/codemirror.js')}}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='mode/clike/clike.js')}}" type="text/javascript"></script>

    <link rel="stylesheet" media="all" href="{{ url_for('static', filename='css/codemirror.css')}}" />

    <!-- Requires Mergely -->
    <script src="{{ url_for('static', filename='js/mergely.js')}}" type="text/javascript"></script>
    <link rel="stylesheet" media="all" href="{{ url_for('static', filename='css/mergely.css')}}" />

    <link rel="stylesheet" media="all" href="{{ url_for('static', filename='css/style.css')}}" />
</head>

<body>

    <div>
        <p>
        <h1>Instructions</h1>
        </p>
        <p>We are now going to show you the LLM Generated FlashCards. The source Text is Highlighted on the left, the
            Generated FlashCard is on the right</p>
        <p>For the scientific validity of this experiment, it is vital that the review task is taken <b>very
                seriously</b>.
        </p>
        <ul>
            <li>Like in real life, you should <b>find as many defects as possible</b> and you should <b>spend as little
                    time
                    as possible</b> on the review.</li>
            <li>Unlike in real life, we are <b>not interested in maintainability or design issues</b>, but only in
                correctness issues ("bugs").</li>
        </ul>

        <p>For example, a remark like the following is beyond the goal of the review: "Create a new class which is
            implemented by runnable interface that we can access multiple times."
            Instead, what we are interested in are the defects that make the code not work as intended under all
            circumstances.</p>

        <p>Please assume that the code compiles and that the tests pass.</p>
        <p>
            To add a review remark, click on the corresponding line number. To delete a review mark, click on it again
            and
            delete the remark's text.<br><br>
        </p>

    </div>


    {% from "macros.html" import render_flashcard %}


    <div id="flashcards-container">
        {% for flashcard in flashcards %}
        <!-- Wrap each flashcard and its questions in a container -->
        <div class="flashcard-container" id="flashcard-{{ loop.index }}" style="display: none;">
            {{ render_flashcard(flashcard) }}
            <!-- Render your questions here -->
            <div class="questions">
                <!-- Example question - adapt this to your actual question layout -->
                <p>How accurate do you think the information is?</p>
                <!-- Inputs for your survey questions -->
                <!-- Add a button at the end of each flashcard's questions to go to the next flashcard -->
                <button onclick="showNextFlashcard({{ loop.index }})">Submit & Next</button>

                <div style="clear: both; display: none" id="final-questions">
                    <form action="experiment_concluded" method="post" id="current_form">
                        <!-- "diff_data" is a fieldset with a textarea inside containing JSON formatted log data. Doing this
                                we do not need to manipulate data in a submission function due Flask post request mechanics-->
                        <br>
                        <fieldset id="fieldset_question_5" class="container_radio_buttons">
                            <p>How related is the created FlashCard to the content?</p>
                            <label><input type="radio" name="question_interruption_time"
                                    id="question_interruption_time_a0" value="0" class="option-input radio" required>No
                                interruption time</label><br>
                            <label><input type="radio" name="question_interruption_time"
                                    id="question_interruption_time_a1" value="1" class="option-input radio">1-2
                                minutes</label><br>
                            <label><input type="radio" name="question_interruption_time"
                                    id="question_interruption_time_a2" value="2" class="option-input radio">up
                                to 5
                                minutes</label><br>
                            <label><input type="radio" name="question_interruption_time"
                                    id="question_interruption_time_a3" value="3" class="option-input radio">up
                                to 10
                                minutes</label><br>
                            <label><input type="radio" name="question_interruption_time"
                                    id="question_interruption_time_a4" value="4" class="option-input radio">more
                                than 10
                                minutes</label><br>
                        </fieldset>
                        <br>
                        <button type="submit" id="submitter" class="button blue">Next â–º</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>



    <script>
        // JavaScript to control the flashcard display
        document.addEventListener('DOMContentLoaded', (event) => {
            // Initially, show the first flashcard
            if (document.getElementById('flashcard-1')) {
                document.getElementById('flashcard-1').style.display = 'block';
            }
        });

        function showNextFlashcard(currentIndex) {
            // Hide the current flashcard
            var currentCard = document.getElementById('flashcard-' + currentIndex);
            if (currentCard) {
                currentCard.style.display = 'none';
            }

            // Show the next flashcard
            var nextIndex = currentIndex + 1;
            var nextCard = document.getElementById('flashcard-' + nextIndex);
            if (nextCard) {
                nextCard.style.display = 'block';
            } else {
                // No more flashcards - maybe show a completion message or redirect
                console.log('No more flashcards');
            }
        }
    </script>
</body>

</html>